<!doctype html>
<html lang="en" data-bs-theme="dark">
    <head>
        <meta charset ="UTF-8">
        <meta name="viewport" content -"width-device-width, initial-scale=1.0"> 
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <title>Souleater New Age Training </title>
    </head>
    <body>
                <select name="Race" id="raceList" value="FUCK YOU" aria-label="Race" onchange ="getRaceValue(this)">
                   <option value= "All Races" >All Races</option>
                   <option value= "Meister"> Meister</option>
                   <option value= "Weapon"> Weapon</option>
                   <option value="Witch">Witch</option>
                   <option value="Kishin">Kishin</option>
                </select>
                <select name="Rarity" id="rarityList" aria-label="Rarity" onchange ="getRarityValue(this)">
                    <option value= "All Rarity" >All Rarity</option>
                    <option value= "Legendary"> Legendary</option>
                    <option value= "Super Rare"> Super Rare</option>
                    <option value="Rare">Rare</option>
                    <option value="Uncommon">Uncommon</option>
                    <option value="Common">Common</option>
                </select>
            <input type ="text" id ="inputField" placeholder ="search">
            <button onclick="getValue()">Search</button>
    <script>
        //searchbar
        let InputField= document.getElementById("inputField");
        var selectedRaceValue ="";
        var selectedRarityValue ="";
        //Race
        
        //Rarity
        
       

        function getRaceValue(select){
            selectedRaceValue = select.value;
            console.log(selectedRaceValue);
        }
        function getRarityValue(select){
            selectedRarityValue = select.value;
            console.log(selectedRarityValue);
        }
         function inputCheck(str){
           const specialChars = /[!@#$%^&*(),.?":{}|<>]/g;
            return specialChars.test(str);
        }
        function getValue() {
            // Get the input element by its ID
            let inputField = document.getElementById("inputField");
            let searchQuery ="select name, race, description, rarity from trait";
            // Get the value of the input field
            let prevTrue = false;
            if (inputField.value !==""){
                if(inputCheck(inputField.value)){
                    inputField.value ="FUCK YOU";
                }
                
                searchQuery =searchQuery+ " where name = "+inputField.value;
                prevTrue = true;
            }
            if(selectedRaceValue !="All Races" && selectedRaceValue !="" ){
                console.log("Race prev true "+prevTrue);
                if(prevTrue){
                    searchQuery=searchQuery +" and ";
                }else{
                    searchQuery=searchQuery +" where ";
                }
                searchQuery=searchQuery+"Race = " +selectedRaceValue;
                prevTrue=true;
            }
            if(selectedRarityValue !=="All Rarity" && selectedRarityValue !=""){
                console.log("Rarity prev true "+prevTrue);
                if(prevTrue){
                    searchQuery=searchQuery +" and ";
                }else{
                    searchQuery= searchQuery +" where ";
                }
                searchQuery=searchQuery+"Rarity = " +selectedRarityValue ;
            }
            alert(searchQuery);
        }

        
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>   
    </body>